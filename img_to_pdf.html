<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Image → PDF Converter</title>
<link rel="shortcut icon" href="https://raw.githubusercontent.com/MuaazAliC/Internship-Projects/refs/heads/main/6th/img/pf.png" type="image/x-icon">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
:root {
  --card: rgba(30, 41, 59, 0.75);
  --muted: #94a3b8;
  --accent: linear-gradient(135deg, #b98c8c, #0ea5e9, #2563eb);
  --accent-dark: #1d4ed8;
  --glow: #38bdf8;
}
*{margin:0;padding:0;box-sizing:border-box}
html{scroll-behavior:smooth}
html,body{height:100%;width:100%;display:flex;flex-direction:column;justify-content:space-between;font-family:"Segoe UI",Roboto,Arial,sans-serif;background:linear-gradient(-45deg,#578aff,#00000083,#5e5e5e,#0f172a);background-size:400% 400%;animation:gradientFlow 15s ease infinite;color:#fff}
@keyframes gradientFlow{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
nav{background:rgba(30,41,59,.7);backdrop-filter:blur(10px);color:#fff;display:flex;justify-content:space-between;align-items:center;padding:15px 8%;position:sticky;top:0;width:100%;z-index:1000;border-bottom:1px solid rgba(255,255,255,.1)}
nav .logo{font-size:24px;font-weight:700;color:#38bdf8;transition:.3s}
nav .logo:hover{color:#60a5fa}
nav ul{list-style:none;display:flex;gap:25px}
nav ul li a{text-decoration:none;color:#e2e8f0;font-size:16px;transition:.3s;padding:6px 10px;border-radius:8px}
nav ul li a:hover{background:rgba(56,189,248,.15);color:#38bdf8}
.menu-toggle{display:none;flex-direction:column;cursor:pointer;gap:5px}
.menu-toggle span{width:25px;height:3px;background:#fff;border-radius:2px}
.wrap{max-width:100%;margin:auto;padding:20px}
header{text-align:center;margin-bottom:20px}
h1{font-size:28px;margin-bottom:8px;background:linear-gradient(135deg,#38bdf8,#0ea5e9,#2563eb);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
p.lead{font-size:15px;color:var(--muted);margin:0}
.controls{background:var(--card);padding:20px;border-radius:16px;display:flex;flex-wrap:wrap;gap:12px;justify-content:center;align-items:center;box-shadow:0 4px 20px rgba(0,0,0,.4);backdrop-filter:blur(12px)}
.filebox{position:relative;overflow:hidden;display:inline-block}
.filebox input[type=file]{font-size:100px;position:absolute;left:0;top:0;opacity:0;cursor:pointer}
.file-btn{background:var(--accent);color:#fff;padding:10px 20px;border-radius:999px;cursor:pointer;font-weight:600;border:none;transition:.3s;display:inline-block;min-width:150px;text-align:center}
.file-btn:hover{background:var(--accent-dark);transform:translateY(-2px);box-shadow:0 4px 15px rgba(56,189,248,.6),0 0 8px rgba(56,189,248,.4)}
.btn{background:var(--accent);color:#fff;padding:10px 16px;border:none;border-radius:999px;font-weight:600;cursor:pointer;transition:.3s}
.btn:hover{background:var(--accent-dark);transform:translateY(-2px);box-shadow:0 4px 15px rgba(56,189,248,.6),0 0 12px rgba(56,189,248,.4)}
.btn.secondary{background:transparent;border:1px solid var(--muted);color:var(--muted)}
.btn.secondary:hover{border-color:var(--glow);color:var(--glow)}
.options{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
.options select{cursor:pointer}
label.small{font-size:13px;color:var(--muted)}
select,input[type="text"]{background:white;color:#000;border:1px solid var(--muted);padding:6px 10px;border-radius:8px}
.thumbs{margin-top:16px;display:grid;grid-template-columns:repeat(auto-fill,minmax(120px,1fr));gap:16px}
.thumb{background:var(--card);border-radius:12px;overflow:hidden;position:relative;box-shadow:0 4px 12px rgba(0,0,0,.4);cursor:pointer}
.thumb img{width:100%;height:100px;object-fit:cover}
.thumb .remove{position:absolute;top:6px;right:6px;background:rgba(0,0,0,.7);color:#fff;border-radius:50%;padding:2px 6px;cursor:pointer;font-size:12px}
.progress{margin-top:14px;height:10px;background:#1e293b;border-radius:999px;overflow:hidden}
.progress>i{display:block;height:100%;background:linear-gradient(270deg,#38bdf8,#0ea5e9,#2563eb,#38bdf8);background-size:800% 100%;width:0%;transition:.3s;animation:progressGradient 3s linear infinite}
@keyframes progressGradient{0%{background-position:0% 0%}100%{background-position:-800% 0%}}
.output{margin-top:16px;display:flex;gap:10px;flex-wrap:wrap;justify-content:center}
a{text-decoration:none;color:var(--glow)}
footer{background:#1e293b;color:#cbd5e1;text-align:center;margin-top:60px;width:100%;border-top:1px solid rgba(255,255,255,.1)}
footer .social-links{margin:10px 0 15px}
footer .social-links a{color:#cbd5e1;margin:0 12px;font-size:22px;transition:.3s}
footer .social-links a:hover{color:#38bdf8;transform:scale(1.2)}
footer p{font-size:20px;margin-bottom:10px;opacity:.8}
#toast {
  position: fixed;
  top: 20px;
  left: -400px;
  min-width: 250px;
  max-width: 350px;
  padding: 15px 20px;
  font-size: 16px;
  font-weight: 500;
  color: #fff;
  background: linear-gradient(135deg, #2563eb, #1e3a8a);
  border-radius: 8px;
  box-shadow: 0 5px 15px rgba(0,0,0,0.3);
  z-index: 9999;
  opacity: 0;
  transition: all 0.5s ease;
}

#toast.show {
  left: 20px; 
  opacity: 1;
}
@media (max-width: 768px) {
  nav ul {
    display: none;
    flex-direction: column;
    background: rgba(30, 41, 59, 0.95);
    position: absolute;
    top: 60px;
    right: 5%;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.2);
  }

  nav ul.active {
    display: flex;
  }

  .menu-toggle {
    display: flex;
  }
}

</style>
</head>
<body>
<nav>
  <div class="logo">Code With Muaaz</div>
  <ul id="nav-links">
    <li><a href="index.html">Home</a></li>
    <li><a href="index.html">Tools</a></li>
    <li><a href="#footer">Contact</a></li>
  </ul>
  <div class="menu-toggle" onclick="toggleMenu()"><span></span><span></span><span></span></div>
</nav>
<div id="toast"></div>

<div class="wrap">
  <header>
    <h1><i class="fa-solid fa-image" style="color: #ffffff;"></i> Image → PDF Converter</h1>
    <h1>By Code With Muaaz</h1>
    <p class="lead">Convert your images to a PDF — fast, free & mobile-friendly.</p>
  </header>

  <div class="controls">
    <div class="filebox">
      <button class="file-btn">Choose Images</button>
      <input id="files" type="file" accept="image/*" multiple>
    </div>
    <div class="options">
      <label class="small">Paper:</label>
      <select id="paper"><option value="a4">A4</option><option value="letter">Letter</option></select>
      <label class="small">Orientation:</label>
      <select id="orient"><option value="portrait">Portrait</option><option value="landscape">Landscape</option></select>
      <label class="small">Quality:</label>
      <select id="quality"><option value="0.9">High</option><option value="0.7">Medium</option><option value="0.5">Low</option></select>
    </div>
    <input id="filename" type="text" placeholder="filename.pdf">
    <div class="watermark-controls">
      <input id="watermark" type="text" placeholder="Optional watermark text">
      <label class="small">Color:</label>
      <input id="watermarkColor" type="color" value="#b4b4b4">
    </div>
    <button id="generate" class="btn">Generate PDF</button>
    <button id="clear" class="btn secondary">Clear</button>
  </div>

  <div class="thumbs" id="thumbs"></div>
  <div class="progress" style="display:none"><i id="prog"></i></div>
  <div class="output" id="output" style="display:none">
    <a id="downloadLink" class="btn" href="#" download><i class="fa-solid fa-download"></i> Download PDF</a>
    <button id="openInNew" class="btn secondary">Open in new tab</button>
  </div>
</div>

<footer id="footer">
  <div class="social-links">
    <a href="https://www.youtube.com/@CodeWithMuaaz-official" target="_blank"><i class="fab fa-youtube"></i></a>
    <a href="https://github.com/MuhammadMuaazAli" target="_blank"><i class="fab fa-github"></i></a>
    <a href="https://www.instagram.com/codewithmuaaz" target="_blank"><i class="fab fa-instagram"></i></a>
    <a href="https://www.linkedin.com/in/muhammad-muaaz-ali-6373ab2a3/" target="_blank"><i class="fab fa-linkedin"></i></a>
    <a href="https://muhammadmuaazali.github.io/website/" target="_blank"><i class="fas fa-globe"></i></a>
  </div>
  <p class="footer-text">✨ 100% client-side — your files never leave your device.<br>Your privacy is our first priority. ✨</p>
  <p>© 2025 Muhammad Muaaz Ali. All rights reserved.</p>
</footer>

<script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
<script>
// ===== Navbar =====
function toggleMenu(){ document.getElementById("nav-links").classList.toggle("active"); }

// ===== File Handling =====
const filesEl=document.getElementById('files');
const fileBtn=document.querySelector('.file-btn');
fileBtn.addEventListener('click',()=>filesEl.click());

const thumbs=document.getElementById('thumbs');
const generateBtn=document.getElementById('generate');
const clearBtn=document.getElementById('clear');
const output=document.getElementById('output');
const downloadLink=document.getElementById('downloadLink');
const openInNew=document.getElementById('openInNew');
const paperEl=document.getElementById('paper');
const orientEl=document.getElementById('orient');
const qualityEl=document.getElementById('quality');
const progWrap=document.querySelector('.progress');
const progBar=document.getElementById('prog');
const filenameEl=document.getElementById('filename');
const watermarkEl=document.getElementById('watermark');
const watermarkColorEl=document.getElementById('watermarkColor');

function showToast(message, type = "info") {
  const toast = document.getElementById("toast");
  toast.textContent = message;

  // Style based on type
  if (type === "error") {
    toast.style.background = "linear-gradient(135deg, #dc2626, #7f1d1d)";
  } else if (type === "success") {
    toast.style.background = "linear-gradient(135deg, #16a34a, #065f46)";
  } else {
    toast.style.background = "linear-gradient(135deg, #2563eb, #1e3a8a)";
  }

  toast.classList.add("show");

  // Hide after 4 seconds
  setTimeout(() => {
    toast.classList.remove("show");
  }, 4000);
}


let selectedFiles=[];

filesEl.addEventListener('change',e=>{
  selectedFiles=selectedFiles.concat(Array.from(e.target.files));
  renderThumbs();
  filesEl.value='';
});

function renderThumbs(){
  thumbs.innerHTML='';
  selectedFiles.forEach((file,i)=>{
    const box=document.createElement('div'); box.className='thumb';
    const img=document.createElement('img'); img.src=URL.createObjectURL(file);
    img.onload=()=>URL.revokeObjectURL(img.src);
    const rem=document.createElement('div'); rem.className='remove'; rem.textContent='✕';
    rem.onclick=()=>{selectedFiles.splice(i,1);renderThumbs();}
    box.appendChild(img); box.appendChild(rem); thumbs.appendChild(box);
  });
}

clearBtn.addEventListener('click',resetAll);
downloadLink.addEventListener('click',resetAll);
function resetAll(){
  selectedFiles=[]; renderThumbs();
  output.style.display='none'; progWrap.style.display='none';
  filenameEl.value=''; watermarkEl.value=''; watermarkColorEl.value='#b4b4b4';
}

// ===== Generate PDF =====
generateBtn.addEventListener('click',async()=>{
  if(!selectedFiles.length){showToast('Select at least one image.');return;}
  generateBtn.disabled=true; generateBtn.textContent='Generating...';
  progWrap.style.display='block'; progBar.style.width='0%';
  try{
    const {jsPDF}=window.jspdf;
    const doc=new jsPDF({unit:'mm',format:paperEl.value,orientation:orientEl.value});
    const pageSize=doc.internal.pageSize;
    const pageWidth=pageSize.getWidth();
    const pageHeight=pageSize.getHeight();
    const margin=8, usableW=pageWidth-margin*2, usableH=pageHeight-margin*2;
    const watermarkText=watermarkEl.value.trim(), watermarkColor=watermarkColorEl.value;
    for(let i=0;i<selectedFiles.length;i++){
      progBar.style.width=Math.round((i/selectedFiles.length)*100)+'%';
      const imgData=await fileToDataUrl(selectedFiles[i]);
      const down=await downscaleImage(imgData,usableW,usableH,parseFloat(qualityEl.value));
      const imgProps=await getImageProps(down);
      const imgWmm=(imgProps.width/96)*25.4, imgHmm=(imgProps.height/96)*25.4;
      const ratio=Math.min(usableW/imgWmm,usableH/imgHmm);
      const drawW=imgWmm*ratio, drawH=imgHmm*ratio;
      const x=(pageWidth-drawW)/2, y=(pageHeight-drawH)/2;
      doc.addImage(down,'JPEG',x,y,drawW,drawH);

      // ✅ Correct watermark rotation
      if(watermarkText){
        doc.saveGraphicsState();
        doc.setFontSize(40); doc.setTextColor(watermarkColor);
        doc.setFont('helvetica','bold');
        doc.text(watermarkText,pageWidth/2,pageHeight/2,{align:'center',angle:45});
        doc.restoreGraphicsState();
      }
      if(i<selectedFiles.length-1) doc.addPage();
    }
    progBar.style.width='100%';
    const blob=doc.output('blob');
    const url=URL.createObjectURL(blob);
    const fname=filenameEl.value.trim()||'images.pdf';
    downloadLink.href=url; downloadLink.download=fname;
    openInNew.onclick=()=>window.open(url,'_blank');
    output.style.display='flex';
  }catch(err){showToast('Error: '+err.message);}
  finally{generateBtn.disabled=false;generateBtn.textContent='Generate PDF';}
});

// ===== Helpers =====
function fileToDataUrl(file){return new Promise((res,rej)=>{const r=new FileReader();r.onload=()=>res(r.result);r.onerror=rej;r.readAsDataURL(file);});}
function getImageProps(dataUrl){return new Promise(res=>{const img=new Image();img.onload=()=>res({width:img.width,height:img.height});img.src=dataUrl;});}
function downscaleImage(dataUrl,targetMmW,targetMmH,quality){return new Promise(res=>{const img=new Image();img.onload=()=>{const dpi=96;const targetPxW=Math.round((targetMmW/25.4)*dpi);const targetPxH=Math.round((targetMmH/25.4)*dpi);const ratio=Math.min(targetPxW/img.width,targetPxH/img.height,1);const c=document.createElement('canvas');c.width=Math.max(1,Math.round(img.width*ratio));c.height=Math.max(1,Math.round(img.height*ratio));const ctx=c.getContext('2d');ctx.fillStyle='#fff';ctx.fillRect(0,0,c.width,c.height);ctx.drawImage(img,0,0,c.width,c.height);res(c.toDataURL('image/jpeg',quality));};img.src=dataUrl;});}
</script>
</body>
</html>
